<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
    <head>
    	<div th:replace="fragments :: html_head">Static html head</div>
    </head>

	<body>
		<div th:replace="fragments :: header(here='Transfer')">Static header</div>
		
		<form th:action="@{/transfer/addFriend}" method="get">
			<h3> Send Money 
				<span style="float:right; display:flex">
        	   		<input type="submit" value="Add Connection"/>
        		</span>
        	</h3>
   		</form>
		
		<form action="#" th:action="@{/transfer}" th:object="${transaction}" method="post">
			<fieldset th:with="value=0">
				<select id="dropDownList" th:field="*{recipientEmail}" required>
    				<option value="0" disabled>Select A Connection</option>
    				<option th:each="buddy : ${buddyList}" th:value="${buddy.friendEmail}" th:text="${buddy.nickname}"></option>
				</select>
				
				<input type="number" th:value="${value}" min="0" style="padding-right:20px; text-align:right;" required/>
				<input type="hidden" th:field="*{sendValue}" value="100*${value}"/>
				<span style="margin-left:-20px;">€</span>
            	
        		<button type="submit">Pay</button> 
        		
			</fieldset>
		</form>
		
		<div th:with="way='received'">
		<h3> My Transactions 
			<span style="float:right; display:flex">
				<label><input type="radio" value="received" th:name="way" checked>
                Received</label>
				<label><input type="radio" value="sent" th:name="way">
                Sent</label>
       		</span>
       	</h3>
       	<span th:text="${way}"></span>
		
		<table>
			<thead>
				<tr>
					<th>Connections</th>
					<th>Description</th>
					<th>Amount</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="income : ${incomesList}">
					<td> <span th:text="${income.senderEmail}"title="From: ${income.senderEmail} 
To ${income.recipientEmail} 
Value: ${income.sendValue} 
Fee: ${income.fee} 
Time: ${income.transferTime} 
Description: ${income.description}">nickname</span> </td>
					<td> <span th:txt="${income.description}"title="From: ${income.senderEmail} 
To ${income.recipientEmail} 
Value: ${income.sendValue} 
Fee: ${income.fee} 
Time: ${income.transferTime} 
Description: ${income.description}">Transaction.description</span> </td>
					<td> +<span th:text="${income.getReceivedValue()}"title="From: ${income.senderEmail} 
To ${income.recipientEmail} 
Value: ${income.sendValue} 
Fee: ${income.fee} 
Time: ${income.transferTime} 
Description: ${income.description}">Transaction.value</span>€ </td>
				</tr>
			</tbody>
		</table>
		<table>
			<thead>
				<tr>
					<th>Connections</th>
					<th>Description</th>
					<th>Amount</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="outcome : ${outcomesList}" title="From: ${outcome.senderEmail} \n To ${outcome.recipientEmail} \n Value: ${outcome.sendValue} \n Fee: ${outcome.fee} \n Time: ${outcome.transferTime} \n Description: ${outcome.description}">
					<td> <span th:text="${outcome.recipientEmail}">nickname</span> </td>
					<td> <span th:txt="${outcome.description}">Transaction.description</span> </td>
					<td> -<span th:text="${outcome.sendValue}">Transaction.value</span>€ </td>
				</tr>
			</tbody>
		</table>
		 (+ click pour plus d'info ? (date, taxe))
		</div>
		
		<div th:replace="fragments :: footer">Static footer</div>
	</body>
</html>